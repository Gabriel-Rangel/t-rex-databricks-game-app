<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>T-Rex Runner | Databricks</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>

  <!-- ═══ Persistent Databricks Watermark (bottom-left) ═══ -->
  <div class="db-watermark">
    <svg viewBox="0 0 36 36" width="32" height="32" fill="none">
      <path d="M18 0L35.3 9v18L18 36 .7 27V9L18 0z" fill="#FF3621"/>
      <path d="M18 6l11.5 6.6v13.2L18 32.4 6.5 25.8V12.6L18 6z" fill="#1B1B1D"/>
      <path d="M18 12l5.8 3.3v6.6L18 25.2l-5.8-3.3v-6.6L18 12z" fill="#FF3621"/>
    </svg>
    <span class="db-watermark-text">POWERED BY DATABRICKS</span>
  </div>

  <!-- ═══ Persistent Databricks Corner (top-right) ═══ -->
  <div class="db-corner">
    <span class="db-corner-text">DATABRICKS APPS</span>
    <svg viewBox="0 0 36 36" width="26" height="26" fill="none">
      <path d="M18 0L35.3 9v18L18 36 .7 27V9L18 0z" fill="#FF3621"/>
      <path d="M18 6l11.5 6.6v13.2L18 32.4 6.5 25.8V12.6L18 6z" fill="#1B1B1D"/>
      <path d="M18 12l5.8 3.3v6.6L18 25.2l-5.8-3.3v-6.6L18 12z" fill="#FF3621"/>
    </svg>
  </div>

  <!-- ═══ Screen 1: Registration ═══ -->
  <div id="screen-register" class="screen active">
    <div class="container">
      <div class="logo">
        <div class="db-logo">
          <svg viewBox="0 0 36 36" width="56" height="56" fill="none">
            <path d="M18 0L35.3 9v18L18 36 .7 27V9L18 0z" fill="#FF3621"/>
            <path d="M18 6l11.5 6.6v13.2L18 32.4 6.5 25.8V12.6L18 6z" fill="#1B1B1D"/>
            <path d="M18 12l5.8 3.3v6.6L18 25.2l-5.8-3.3v-6.6L18 12z" fill="#FF3621"/>
          </svg>
          <span class="db-logo-text">Databricks</span>
        </div>
        <pre class="dino-ascii">
        ██████
       ██░█████
       ████████
       ████
   █  ██████████
  ██ █████████
  █████████
   ████████
    ██████
     ████
     █ █
    █   █
        </pre>
        <h1>T-REX<br/>RUNNER</h1>
        <p class="subtitle">Desafio Databricks</p>
        <p class="powered-by">
          <svg viewBox="0 0 36 36" width="18" height="18" fill="none">
            <path d="M18 0L35.3 9v18L18 36 .7 27V9L18 0z" fill="#FF3621"/>
            <path d="M18 6l11.5 6.6v13.2L18 32.4 6.5 25.8V12.6L18 6z" fill="#1B1B1D"/>
            <path d="M18 12l5.8 3.3v6.6L18 25.2l-5.8-3.3v-6.6L18 12z" fill="#FF3621"/>
          </svg>
          APPS &bull; LAKEBASE &bull; MODEL SERVING &bull; GENIE
        </p>
      </div>

      <form id="register-form" autocomplete="off">
        <div class="form-group">
          <label for="name">Seu Nome</label>
          <input type="text" id="name" name="name" required placeholder="Maria Silva" />
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" required placeholder="maria@empresa.com" />
        </div>
        <div class="form-group">
          <label for="company">Empresa</label>
          <input type="text" id="company" name="company" placeholder="Empresa S.A." />
        </div>
        <button type="submit" class="btn btn-primary">INICIAR JOGO</button>
      </form>

      <div id="stats-bar" class="stats-bar">
        <span id="stat-players">0 jogadores</span>
        <span id="stat-games">0 partidas</span>
        <span id="stat-winrate">0% vitórias</span>
      </div>
    </div>
  </div>

  <!-- ═══ Screen 2: Game ═══ -->
  <div id="screen-game" class="screen">
    <div class="container game-container">
      <div class="game-header">
        <span id="player-label" class="player-label"></span>
        <span class="game-hint">
          <svg viewBox="0 0 36 36" width="12" height="12" fill="none" style="vertical-align: middle; margin-right: 4px;">
            <path d="M18 0L35.3 9v18L18 36 .7 27V9L18 0z" fill="#FF3621"/>
            <path d="M18 6l11.5 6.6v13.2L18 32.4 6.5 25.8V12.6L18 6z" fill="#1B1B1D"/>
            <path d="M18 12l5.8 3.3v6.6L18 25.2l-5.8-3.3v-6.6L18 12z" fill="#FF3621"/>
          </svg>
          ESPAÇO = Pular &nbsp; BAIXO = Abaixar
        </span>
      </div>
      <canvas id="game-canvas"></canvas>
    </div>
  </div>

  <!-- ═══ Screen 3: AI Playing ═══ -->
  <div id="screen-ai" class="screen">
    <div class="container ai-container">
      <div class="db-logo" style="margin-bottom: 16px;">
        <svg viewBox="0 0 36 36" width="44" height="44" fill="none">
          <path d="M18 0L35.3 9v18L18 36 .7 27V9L18 0z" fill="#FF3621"/>
          <path d="M18 6l11.5 6.6v13.2L18 32.4 6.5 25.8V12.6L18 6z" fill="#1B1B1D"/>
          <path d="M18 12l5.8 3.3v6.6L18 25.2l-5.8-3.3v-6.6L18 12z" fill="#FF3621"/>
        </svg>
        <span class="db-logo-text">Databricks AI</span>
      </div>
      <h2>A IA ESTÁ JOGANDO...</h2>
      <div class="ai-game-visual">
        <canvas id="ai-canvas" width="800" height="200"></canvas>
      </div>
      <div class="ai-score-counter">
        <span>PONTUAÇÃO IA: </span><span id="ai-score-display">00000</span>
      </div>
      <div class="ai-loading-bar">
        <div id="ai-progress" class="ai-progress"></div>
      </div>
    </div>
  </div>

  <!-- ═══ Screen 4: Results ═══ -->
  <div id="screen-results" class="screen">
    <div class="container results-container">
      <div class="db-logo" style="margin-bottom: 12px;">
        <svg viewBox="0 0 36 36" width="40" height="40" fill="none">
          <path d="M18 0L35.3 9v18L18 36 .7 27V9L18 0z" fill="#FF3621"/>
          <path d="M18 6l11.5 6.6v13.2L18 32.4 6.5 25.8V12.6L18 6z" fill="#1B1B1D"/>
          <path d="M18 12l5.8 3.3v6.6L18 25.2l-5.8-3.3v-6.6L18 12z" fill="#FF3621"/>
        </svg>
        <span class="db-logo-text">Resultado</span>
      </div>
      <div id="result-banner" class="result-banner"></div>

      <div class="score-comparison">
        <div class="score-card human">
          <div class="score-label">VOCÊ</div>
          <div id="result-human-score" class="score-value">0</div>
        </div>
        <div class="vs">VS</div>
        <div class="score-card ai">
          <div class="score-label">DATABRICKS AI</div>
          <div id="result-ai-score" class="score-value">0</div>
        </div>
      </div>

      <div id="llm-commentary" class="commentary"></div>

      <div id="swag-banner" class="swag-banner hidden">
        VOCÊ GANHOU UM BRINDE! Procure a equipe Databricks para retirar seu prêmio.
      </div>

      <div class="result-actions">
        <button id="btn-leaderboard" class="btn btn-secondary">VER RANKING</button>
        <button id="btn-play-again" class="btn btn-primary">PRÓXIMO JOGADOR</button>
      </div>
    </div>
  </div>

  <!-- ═══ Screen 5: Leaderboard ═══ -->
  <div id="screen-leaderboard" class="screen">
    <div class="container leaderboard-container">
      <div class="db-logo" style="margin-bottom: 12px;">
        <svg viewBox="0 0 36 36" width="40" height="40" fill="none">
          <path d="M18 0L35.3 9v18L18 36 .7 27V9L18 0z" fill="#FF3621"/>
          <path d="M18 6l11.5 6.6v13.2L18 32.4 6.5 25.8V12.6L18 6z" fill="#1B1B1D"/>
          <path d="M18 12l5.8 3.3v6.6L18 25.2l-5.8-3.3v-6.6L18 12z" fill="#FF3621"/>
        </svg>
        <span class="db-logo-text">Databricks</span>
      </div>
      <h2>RANKING</h2>
      <div class="leaderboard-scroll">
        <table id="leaderboard-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Jogador</th>
              <th>Empresa</th>
              <th>Pontos</th>
              <th>vs IA</th>
              <th>Resultado</th>
            </tr>
          </thead>
          <tbody id="leaderboard-body"></tbody>
        </table>
      </div>
      <button id="btn-back-register" class="btn btn-primary">PRÓXIMO JOGADOR</button>
    </div>

    <!-- Genie Chat Popup -->
    <button id="genie-fab" class="genie-fab" title="Pergunte ao Genie">
      <svg class="genie-fab-icon" viewBox="0 0 24 24" width="28" height="28" fill="currentColor">
        <rect x="3" y="4" width="18" height="14" rx="2" />
        <rect x="7" y="8" width="3" height="3" rx="1" fill="var(--bg)" />
        <rect x="14" y="8" width="3" height="3" rx="1" fill="var(--bg)" />
        <rect x="9" y="13" width="6" height="2" rx="1" fill="var(--bg)" />
        <rect x="10" y="1" width="4" height="3" rx="1" />
        <rect x="1" y="9" width="2" height="4" rx="1" />
        <rect x="21" y="9" width="2" height="4" rx="1" />
        <rect x="7" y="18" width="4" height="3" rx="1" />
        <rect x="13" y="18" width="4" height="3" rx="1" />
      </svg>
    </button>

    <div id="genie-popup" class="genie-popup hidden">
      <div class="genie-header">
        <span class="genie-title">&#9733; Pergunte ao Genie</span>
        <button id="genie-close" class="genie-close">&times;</button>
      </div>
      <div id="genie-messages" class="genie-messages">
        <div class="genie-msg genie-msg-bot">
          Olá! Eu sou o Genie. Pergunte qualquer coisa sobre os dados do jogo!
        </div>
        <div class="genie-suggestions">
          <button class="genie-chip" data-q="Quem tem a maior pontuação?">Maior pontuação?</button>
          <button class="genie-chip" data-q="Qual a taxa de vitória dos humanos?">Taxa de vitória?</button>
          <button class="genie-chip" data-q="Qual empresa tem mais jogadores?">Top empresa?</button>
          <button class="genie-chip" data-q="Mostre os top 10 jogadores">Top 10 jogadores</button>
        </div>
      </div>
      <div class="genie-input-bar">
        <input type="text" id="genie-input" placeholder="Faça uma pergunta..." autocomplete="off" />
        <button id="genie-send" class="genie-send">&#9654;</button>
      </div>
    </div>
  </div>

  <script src="/static/game.js"></script>
  <script src="/static/app.js"></script>
</body>
</html>
